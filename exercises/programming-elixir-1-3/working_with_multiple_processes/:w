defmodule PingPong do
  def pingpong(send_to) do
    receive do
      token ->
        send send_to, token
    end
  end

  def run() do
    p1 = spawn(PingPong, :pingpong, [self()])
    p2 = spawn(PingPong, :pingpong, [self()])

    send p1, "Fred"
    send p2, "Betty"

    receive do
      token ->
        IO.inspect(token)
    end
  end
end
